import binascii
import errno
import os
import shutil
from distutils.dir_util import copy_tree

import requests
import xmltodict
from urllib3 import disable_warnings
from urllib3.exceptions import InsecureRequestWarning

# The Sony requests are over HTTPS but have no SSL cert.... sooo... vvv
disable_warnings(InsecureRequestWarning)

try:
    os.makedirs(os.path.dirname("temp/"))
except:
    pass
if os.path.exists("patch/"):
    shutil.rmtree("patch/")

if not os.path.exists(os.path.dirname("tools/raps/")):
    try:
        os.makedirs(os.path.dirname("tools/raps/"))
    except OSError as exc:  # Guard against race condition
        if exc.errno != errno.EEXIST:
            raise
    with open("tools/raps/JP0177-NPJB00532_00-RYUISHINRETAIL00.rap", "wb") as f:
        f.write(binascii.unhexlify("180BD2F46F41154B824F5E2E595DE522"))

if not os.path.exists(os.path.dirname("tools/data/")):
    try:
        os.makedirs(os.path.dirname("tools/data/"))
    except OSError as exc:  # Guard against race condition
        if exc.errno != errno.EEXIST:
            raise
    with open("tools/data/keys", "wb") as f:
        f.write(
            binascii.unhexlify(
                "5B4E505F7469645D0D0A747970653D4F544845520D0A6B65793D39423531354645414346373530363439383141413630344439314135344539370D0A0D0A5B4E505F63695D0D0A747970653D4F544845520D0A6B65793D36424135323937364546444131364546334333333946423239373145323536420D0A0D0A5B4E505F6B6C69635F667265655D0D0A747970653D4F544845520D0A6B65793D37324639393037383846394346463734353732354630384534433132383338370D0A0D0A5B4E505F6B6C69635F6B65795D0D0A747970653D4F544845520D0A6B65793D46324642434137413735423034454443313339303633384343444644443145450D0A0D0A5B4E505F696470735F636F6E73745D0D0A747970653D4F544845520D0A6B65793D35453036453034464439344137314246303030303030303030303030303030310D0A0D0A5B4E505F7269665F6B65795D0D0A747970653D4F544845520D0A6B65793D44413744344235453439394134463533423143314131344137343834343433420D0A0D0A5B4E505F7369675D0D0A747970653D4F544845520D0A7075623D45363739324534343643454241323742434144463337344239393530344644384538304144464542334536364445373346464535384433323931323231433635303138433033384433383232433343390D0A707269763D3030303030303030303030303030303030303030303030303030303030303030303030303030303030300D0A63747970653D320D0A0D0A5B706B675D0D0A747970653D504B470D0A7265766973696F6E3D30300D0A76657273696F6E3D303030333030353530303030303030300D0A65726B3D413937383138424431393341363741313646453833413835354531424539464235363430393338443444424342324342353243354132463842303242313033310D0A7269763D34414345463031323234464245454446383234354638464631303231314536450D0A7075623D34314441314138463734464638443346314345323045463345394438383635433936303134464533373343413134334339424144454446324439443343373537333330373131354343464530344631330D0A707269763D3030353432443436453742334441414338414542383145353333383733414142443644373442423731300D0A63747970653D32330D0A0D0A5B706B675D0D0A747970653D504B470D0A7265766973696F6E3D30310D0A76657273696F6E3D303030333030353630303030303030300D0A65726B3D463846393930303646314330303744354430423139303945393536364530453730423536393339394643333339344138313138303946444235434145393243440D0A7269763D35394432384442344144444642343042374437363842433936363743363742310D0A7075623D35343332424444443146393734313831343741464630313645414136313030383334463243414138433439384238383936353638394545343444463334394230363643443433434246344632433544300D0A707269763D0D0A63747970653D31370D0A0D0A5B7370705D0D0A747970653D5350500D0A7265766973696F6E3D30300D0A76657273696F6E3D303030333030353530303030303030300D0A65726B3D353643363535373437413442363935374132443842423941433630354332393745364143393837313933324246454344444530363643454535423239343730410D0A7269763D30303745364232363845463145393836443130413938383943463933413843420D0A7075623D32363543303445374632304333423841434143393045374339443132373537454437414342433031414136363234413241393237453731394134414131323232463837443931373030354636303732410D0A707269763D3030303136303845463342414341464642384333413539353841323446373538333235423632423038430D0A63747970653D32320D0A0D0A5B7370705D0D0A747970653D5350500D0A7265766973696F6E3D30310D0A76657273696F6E3D303030333030353630303030303030300D0A65726B3D374644323232423346454634363744463745334636334143384237373530314133423338373532343131453936414645444136353837423543443545393142300D0A7269763D42383839323930393232423030324635373038364238313841384644453343430D0A7075623D37314531324342334438314146413739363730414634464143344242453431414137463744444633363846353631354539333343423143323141373833423733433038354341343939383643434636330D0A707269763D0D0A63747970653D32320D0A0D0A5B7370705D0D0A747970653D5350500D0A7265766973696F6E3D30320D0A76657273696F6E3D303030333030363030303030303030300D0A65726B3D454431373234383231344239414233344435374544354341364343414543393837393133374234423436434535303634453634393144333430303142414346320D0A7269763D33453035353732383831433542433834354433313045414332383439374230380D0A7075623D35303446393035413841414141304539424635354636443532383536393745324341424442314135323430433437343542453839323333303831363945414234334531424644323635463545353739450D0A707269763D0D0A63747970653D0D0A0D0A5B72766B5D0D0A747970653D52564B0D0A7265766973696F6E3D30300D0A76657273696F6E3D303030333030353530303030303030300D0A65726B3D303341463036464431434536444133363633363136383243444635394639373038423544373837364634304139453145394143324232324635314236304244460D0A7269763D38423544373837364634304139453145394143324232324635314236304244460D0A7075623D39414445373833304542373432343545433335374345344636343031363333453541383034384644383635463944384631413931383935333541333736323345323932313432373436334137353446370D0A707269763D3030323435453637334230333944363536444132303642444145344541454643424632413844354541460D0A63747970653D32390D0A0D0A5B72766B5D0D0A747970653D52564B0D0A7265766973696F6E3D30310D0A76657273696F6E3D303030333030353630303030303030300D0A65726B3D323236323841394543344334313444354233324632423442413439323630383944453941343631423139304642334534333932443035374335323535333544450D0A7269763D44354434423845443632423643434130323439413739373736453133363937350D0A7075623D35313735314239463144413538363338443244393946363745323041314434413435344335423034324344314430413434394132393839383038303032424136384642354237463442354234453633420D0A707269763D0D0A63747970653D33320D0A0D0A5B72766B5D0D0A747970653D52564B0D0A7265766973696F6E3D30320D0A76657273696F6E3D303030333030363030303030303030300D0A65726B3D424346454442453031443434354344454633333543353433373033443845394331313939464143333344433435393544373338324541463534454639433443330D0A7269763D42323041323330373935313632303535323536383344383035383337394342460D0A7075623D39383539423637374135423846434341333141364642413245333232304545354532303733343341353845454545364236434232363045423545393731333532433435343238453843383339384245360D0A707269763D0D0A63747970653D0D0A0D0A5B6D65746C64725D0D0A747970653D53454C460D0A7265766973696F6E3D30300D0A73656C665F747970653D4C44520D0A65726B3D433043454645383443323237463735424430374137454238343635303946393342323338453737304441434239464634413338384638313234383242453231420D0A7269763D34374545373435344534373734434339423839363043374235394634433134440D0A7075623D43324434414146333139333535303139414639394434344532423538434132393235324338393132334431314436323138463430423133384341423239423731303146334145423732413937353031390D0A707269763D3030433542324246413141343133444431364632364433314330463245443437323044434642303637300D0A63747970653D32300D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D49534F0D0A65726B3D383836304430434646344430444336383844333232333332314239364235394137373745363931343936313438384530373034384441454342303230454341340D0A7269763D43383244303135443436434631353246314444304331364631384235423145350D0A7075623D37333339313844374338383831333035303933343645364234413842364341413335374142353537453831344538313232424631303243313441333134424639343735423944373045414639454332390D0A707269763D3030394245383932453132324135433934334331424237343033413637333138414139453142323836460D0A63747970653D33360D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030333130303030303030300D0A73656C665F747970653D49534F0D0A65726B3D383836304430434646344430444336383844333232333332314239364235394137373745363931343936313438384530373034384441454342303230454341340D0A7269763D43383244303135443436434631353246314444304331364631384235423145350D0A7075623D37333339313844374338383831333035303933343645364234413842364341413335374142353537453831344538313232424631303243313441333134424639343735423944373045414639454332390D0A707269763D3030394245383932453132324135433934334331424237343033413637333138414139453142323836460D0A63747970653D33360D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030343130303030303030300D0A73656C665F747970653D49534F0D0A65726B3D313031453237463346413246423533414341393234463738334144353533313632443536423937354430354238313335314131313131373939463230323534440D0A7269763D38443245394336323937423841443235323939383435383239364143373733430D0A7075623D31333834343645453042444441353633384639373332384338393536453634383943424246453537433539363144343044443543343342423431333846314334303041384232373230344135443632350D0A707269763D3030383439444243353744334239324630313836344536453832454234454630454636333131453132320D0A63747970653D33320D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D49534F0D0A65726B3D334632363034464132374145414446424531414336394542303042423136454631393643323139334342443632393030464644384332353034313638303834330D0A7269763D41343134414331444237393837453433373737363531423333304238393945310D0A7075623D31463436333341464445313836313444364345463338413246443643344343414337423645423831303944373243443036364543454241303139334541334634334333374145383331373941344535460D0A707269763D3030383542344230354445424137453641443833313635334339373444393531343938303342423237320D0A63747970653D33330D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D49534F0D0A65726B3D424442373441413645334241324443313042314244374631373139383339394131353844424531464130424541363843393046434143424534443034424533370D0A7269763D30323037413437394231353734463845374636393735323846303544353433350D0A7075623D39313745314631444334384135344542354631304233384537353639424235333833363238413743393036463044434136324644413333383035433135464142323730303136393430413039444235380D0A707269763D3030323934343131333633323930393735424135353133333644333936354438384146303239413137420D0A63747970653D30330D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D49534F0D0A65726B3D333131433031354631363946324131453037353746373036344231344337433946334133464645453031354244344533413232343031413236363738353743450D0A7269763D37424238423346354143384530383930453331343841453536383843373335300D0A7075623D33463034304546413233333546454435363730424134443543334142324439443042344241363944313534413030363245413939354137443231444241463044433541304441443333334431433144440D0A707269763D0D0A63747970653D30380D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030363030303030303030300D0A73656C665F747970653D49534F0D0A65726B3D383437344144434133423332343439333145454345423933353738343134343234343241314334413442434634453439384536373338393530463445343039330D0A7269763D46464639434143434334313239313235434146423234304634313945354633390D0A7075623D30393845314135334535394139353331364230304435413239433035464645424145343144314138413338364639444139364639383835384644323545303742423741334243393641354435423535360D0A707269763D0D0A63747970653D30330D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030310D0A76657273696F6E3D303030343030323030303030303030300D0A73656C665F747970653D49534F0D0A65726B3D363335363544424539384333423141353241414443393037433437313330464535374131303733344538344632323539323637304638364544324230413038360D0A7269763D39353346364139393839314234373339333538463533363341303043303842390D0A7075623D32364245374230324537443635433643323142463430363343444238433030393246453136373944363246413141384343433238344131443231383835343733413935393939323533374130363631320D0A707269763D0D0A63747970653D31350D0A0D0A5B69736F6C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030310D0A76657273696F6E3D303030343030333030303030303030300D0A73656C665F747970653D49534F0D0A65726B3D363335363544424539384333423141353241414443393037433437313330464535374131303733344538344632323539323637304638364544324230413038360D0A7269763D39353346364139393839314234373339333538463533363341303043303842390D0A7075623D32364245374230324537443635433643323142463430363343444238433030393246453136373944363246413141384343433238344131443231383835343733413935393939323533374130363631320D0A707269763D0D0A63747970653D31350D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D4C56310D0A65726B3D423946334639453631303743464632363830413931453131384332343033434634413646313846334337454644374431334431414334444237363042443232320D0A7269763D42343336363142394137394241443944384532423034363436394344413145370D0A7075623D34433837304245383644444439393641393241334637463430344633333630343234344131443032414235423738424339444146303330423738424538383637434635383631373142374434354432300D0A707269763D3030324343373336433741443036443236344539414236363345423146333546354443313539323438430D0A63747970653D33330D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030343130303030303030300D0A73656C665F747970653D4C56310D0A65726B3D423838303539333835364338433644323033373538353632364131323937374635304443464346334631333244324338394141364536373045414643313634360D0A7269763D41373942303544344533374238313137413935453645374331344642363430450D0A7075623D37343534433743434246433246363643313432443738413733304133413646393733434330464237354134364643424233393037393031333839313041304341433738453545323146344441333337350D0A707269763D3030303333413639394644443244413643444436434343303342324336313435463939383730364637340D0A63747970653D33340D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4C56310D0A65726B3D314538454545413945383041373239463346413532434635323342323539343145413434423431353544393445354441444335433541373738343736323043370D0A7269763D45303334443331413830333136393630303234443142334433313634464443330D0A7075623D37453341313936463441353837394633413742303931413232363346374332344531373136313239423538303536364433303844394332323534423336414545353344454633304543383546383339380D0A707269763D3030353831354431373132354430344333333739303332314445323945423632343133363531303042350D0A63747970653D33350D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4C56310D0A65726B3D353341424446383442453038423033353142373334463242393744324245313632314243364338383945343336324535433730463339443643334544394632330D0A7269763D34344536353236363141433735383444424530384543423831304642354643300D0A7075623D37333331393841373735394243303733323637353542433937373341384131374338413730343343374244414238334438384532333035313245324541333835324437444134323633413745393746390D0A707269763D3030343331324336353334374143424539354343333036343432464546443041463443323933354542330D0A63747970653D30350D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4C56310D0A65726B3D343837393345424444413141463635443733374441324644413244443130343434374136393846384138324341414545393932383331373131424139344538330D0A7269763D31354443463343363731343741343544303944453735323145454341303741310D0A7075623D38354138383638433332303132374631304236353938393634433639323231433038363730323032314433313830333532304532314644453444424538323737363642453431383235434237333238430D0A707269763D0D0A63747970653D30370D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030363030303030303030300D0A73656C665F747970653D4C56310D0A65726B3D354646313744383336453243344144363934373645323631344636344244443035423931313533383941394136443035354235423534344231433334453344350D0A7269763D44463046353045433343343734334335423137383339443742343946323441340D0A7075623D31434441424533303833333832334634363143413533343130343131354646463630303130423731303633314534333541374439313545383241453838454445363637323634363536434237303632450D0A707269763D0D0A63747970653D30350D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030300D0A76657273696F6E3D303030343030323030303030303030300D0A73656C665F747970653D4C56310D0A65726B3D313043454130343937334643434331324543313939323435313038323244384434433431463635374644334437453733463431354138443638373432314243440D0A7269763D45443836393935363243364143363532303446413136363235374537464346340D0A7075623D3143303538373136333838364337303731383038353031393030323030303030313433464346394533423835383630383430383030363135313830373844313431433035433730443338383534373439313830363843393331343346434331370D0A63747970653D33300D0A0D0A5B6C76316C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030300D0A76657273696F6E3D303030343030333030303030303030300D0A73656C665F747970653D4C56310D0A65726B3D313043454130343937334643434331324543313939323435313038323244384434433431463635374644334437453733463431354138443638373432314243440D0A7269763D45443836393935363243364143363532303446413136363235374537464346340D0A7075623D3143303538373136333838364337303731383038353031393030323030303030313433464346394533423835383630383430383030363135313830373844313431433035433730443338383534373439313830363843393331343346434331370D0A63747970653D33300D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030303030303830303030303030300D0A73656C665F747970653D4C56320D0A65726B3D303134343835343435454339393236433530463631334145373744394333374141393938333843434542364637354641373845323941384336323245383031310D0A7269763D41313744364135323243423142303846393744413841383245393743313246370D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D4C56320D0A65726B3D393433303346363935313335373241423541453137433843324131383339443243323443323846363533383944334242423131383934434532334530373938460D0A7269763D39373639424644313837423930393930414535464541344531313042394346350D0A7075623D41464146354539364146333936434242363930373130383243343641384633344130333045384544423739394530413742453030414132363444464633414542463739323339323044353539343034440D0A707269763D3030373041424639333631423032323931383239443437394635364142323438323033434433454234360D0A63747970653D32300D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030343130303030303030300D0A73656C665F747970653D4C56320D0A65726B3D353735423041364334423446323736304130334645343138394542414634443934373237394644393832423134303730333439303938423038464639324331300D0A7269763D34313143423138463436304345353043414632433432364438463044393343380D0A7075623D33464545333133393534434233303339433332314137453333423937464644454338393838413842353537353931363142303444424634373331323834453441383139314533463137443332423045410D0A707269763D3030373330373634343141303843443137394535464143453334394238364441353842354237424137380D0A63747970653D32310D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4C56320D0A65726B3D364442443438443738374335383830334138443732344441354143463034464638464345393144373534354432333232463242374142463537303134414636380D0A7269763D36303341333632313337303835323045443544373435444543313332354241350D0A7075623D35383838434238334143334343413936313042433137334335333134314330434135384239333731394537343436363043413838323344354541454538463942463733363939373035344534423745330D0A707269763D3030303945424333444534343246413546424636433446334434463945414230373737384131343242440D0A63747970653D32320D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4C56320D0A65726B3D383430313545393046413233313339363238413343373543433039373134453634323742353237413832443138414243334539314344384437444441464631370D0A7269763D35423234303434344436343546323033383131384639374644354131343544350D0A7075623D42323636333138323435323636423244333336343143443841383634303636443037374641433630423745323733393930393941373041363833343534423730463938383845374343304332424637320D0A707269763D3030394434434241324246423141383333304433453230453539443238314434373644323331433733410D0A63747970653D33320D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4C56320D0A65726B3D454145313534343430343845464445374138333142464139463544393646303437433946434646353037323345323932434635304635343137443831453335390D0A7269763D39434139323832444337464139463331354546333135364439373042374344340D0A7075623D30443538393338434234373539384136413637323837344631373638303638463842383044384431373031344432414245424143383545354230393933443946423646333037444443334444413639390D0A707269763D0D0A63747970653D33330D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A76657273696F6E3D303030333030363030303030303030300D0A73656C665F747970653D4C56320D0A65726B3D383841443336374544454332464545443345324639394231433638353037354334314244454339304338344635323643414635383846383942424431434243430D0A7269763D38443138453845353235323330453633444531303239314339444436313542460D0A7075623D38364545443144363545353838393041424441394143413438364132424444423943304135323943323035334641453330314630463639384541463434334441304636303539354135393741373032370D0A707269763D0D0A63747970653D33320D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030300D0A76657273696F6E3D303030343030323030303030303030300D0A73656C665F747970653D4C56320D0A65726B3D304341463231324236464135334330444137453243353735414446363144424536384633344133333433334231423839314142463543343235313430364130330D0A7269763D39423739333734373232414438383845423641333541324446323541384233450D0A7075623D3639353938344237454532454332463737464343333132303135304443453745343438304438343438304444443843353934304145423646373945363344313741384241334534453633423242423036464330434535374533424238464334360D0A0D0A5B6C76326C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030300D0A76657273696F6E3D303030343030333030303030303030300D0A73656C665F747970653D4C56320D0A65726B3D304341463231324236464135334330444137453243353735414446363144424536384633344133333433334231423839314142463543343235313430364130330D0A7269763D39423739333734373232414438383845423641333541324446323541384233450D0A7075623D3639353938344237454532454332463737464343333132303135304443453745343438304438343438304444443843353934304145423646373945363344313741384241334534453633423242423036464330434535374533424238464334360D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030300D0A76657273696F6E3D303030303030383030303030303030300D0A73656C665F747970653D4150500D0A65726B3D393546353030313945374136384533343146413732454644463444363045443337364532354346343642423438444644443146303830323539444339334630340D0A7269763D34413039353544393436444237304436393141363430424237464145434334430D0A7075623D36463844463845424430413144314442303842333044443341393531453346314632374533343033304234324337323943353535353532333244363142383334423842444646423037453534423334330D0A707269763D3030364333453443434232433639413541443743364636303434384535304337463931383445454146340D0A63747970653D32310D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030310D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D4150500D0A65726B3D373934383138333943343036413633324244423441433039334437334439394145313538374632344345374536393139324331434430303130323734413841420D0A7269763D36463046323545314338433442374145373044463936384230343532314444410D0A7075623D39344431423733373842414646354446454432363932343041374133363445443638343436373431363232453530424336303739423645363036413246384530413443353645354346463833363532360D0A707269763D3030334445383031363744324630453944333046323134353134344135353844313137344635343130430D0A63747970653D31310D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030320D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D4150500D0A65726B3D344638394245393844444434334341443334334635424136423141313333423041393731353636463737303438344141433230423544443144433946413036410D0A7269763D39304331323741394234334241394438453839464536353239453235323036460D0A7075623D38434136393035463436313438443744384438344432414643454145363142343145363735304643323245413433354446413631464345364634463836304545344635344439313936434135323930450D0A707269763D0D0A63747970653D31330D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030330D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D4150500D0A65726B3D433145364133353146434544364130363336424643423638303141303934324442374332384244464335453041303533413346353246353246434539373534450D0A7269763D45303930383136334634353735373634343034363641434141343433414537430D0A7075623D35303032324435443337433937393035463839384537384537414131344130423543414144354345383139304145353632394131304436463043463431373335393742333741393541373534354339320D0A707269763D0D0A63747970653D30420D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030340D0A76657273696F6E3D303030333030343130303030303030300D0A73656C665F747970653D4150500D0A65726B3D383338463538363043463937434441443735423339394341343446344332313443444639353141433739353239384437314446334333423745393341414544410D0A7269763D37464442423245393234443138324242304436393834344144433445434135420D0A7075623D31463134304538454638383744414235324630373941303645363931354136343630423735434432353638333441343346413741463930433233303637414634313245444146453243313737384436390D0A707269763D3030373445393232464445453544433443444632324643384437393836343737463831333430303836300D0A63747970653D31340D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030350D0A76657273696F6E3D303030333030343130303030303030300D0A73656C665F747970653D4150500D0A65726B3D433130394142353635393344453542453842413139303537384537443831303933343645383641313130383842343243373237453242373933464436344244430D0A7269763D31354433463139313239354339344230394237314542444530383841313837410D0A7075623D42364242304138344336343941393044393745424135354235353533363646353233383142423338413834433842423731444135413541303934393034334336444232343930323941343331353646370D0A707269763D0D0A63747970653D31350D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030360D0A76657273696F6E3D303030333030343130303030303030300D0A73656C665F747970653D4150500D0A65726B3D364446443741464234373044324232433935354142323232363442314646334336374631383039383342323643303136313544453946324543434245374634310D0A7269763D32344244314331394432413832383642384143453339453441333738303143320D0A7075623D37314634364143333346463839444635383941313030413746423634434541433234344339413043424243314644434538304642344246384130443245363632393333303943423845453843464139350D0A707269763D0D0A63747970653D32430D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030370D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4150500D0A65726B3D393435423939433045363943414630353538433538384239354646343142323332363630454342303137373431463332313843313246394446444545444535350D0A7269763D31443545464245374335443334414436304639464243343641353937374643450D0A7075623D41423238344341353439423244453941413543393033423735363532463738443139324638463441384633434439393230393431354330413834433543394644364246333039354331433138464643440D0A707269763D3030324346383936443335444238373144304536413235324537393938373641373044303433433233450D0A63747970653D31350D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030380D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4150500D0A65726B3D324339453839363945433434444642364138373731444337463746444642434341463332394543334543303730393030434142423233373432413941364531330D0A7269763D35413443454644354139433343303933443042393335323337364431393430350D0A7075623D36453832463642353441304539444542453441384233303433454533423234434439424242363242343431364230343832353832453431394132353532453239414234424541304134443746413244350D0A707269763D0D0A63747970653D31360D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030390D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4150500D0A65726B3D463639453441323933344631313444383946333836434537363633383833363643444432313046314438393133453342393733323537463132303144363332420D0A7269763D46344435333530363933303145453838384343324138353244423635343436310D0A7075623D31443742393734443130453631433245443038374130393831353335393034363737454330374539363236304638393536354646374542444134454530333543324141394243424444353839334639390D0A707269763D0D0A63747970653D32440D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030410D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4150500D0A65726B3D323938303533303245374339324632303430303931363143413933463737364130373231343141384334364131303845353731433436443437334131373641330D0A7269763D35443146414238343431303736373641424344464332354541454243423633330D0A7075623D30393330314236343336433835423533434231353835333030413346314146394642313444423743333030383843343634324144363644354331343842383939354242314136393841384337313832370D0A707269763D3030313038313845443841363636303531433631393836363243334436444445324341343930314444430D0A63747970653D32350D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030420D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4150500D0A65726B3D413443393734303243433841373142433737343836363146453943453744463434444345393544304435383933384135394634374239453944424137424643330D0A7269763D45343739324632423944423330434238443135393630373741313346423342350D0A7075623D32373333433838394432383935353046453030454141354134374133344345463043314146313837363130454230374241333544324330394242373343383042323434454234313437373030443142460D0A707269763D0D0A63747970653D32360D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030430D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4150500D0A65726B3D393831344546464636374237303734443142323633424638354244433835373643453944454339313431323339373142313639343732413142433233383746410D0A7269763D44343342314641384245313537313442333037384332333930384242324243410D0A7075623D37443139383643364245453643453145304335383933424432444632303338383146343044353035363736314343334631463245394439413337383631374132444534304241354630393834344345420D0A707269763D0D0A63747970653D33440D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030440D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4150500D0A65726B3D303342344334323145304330444537303843304630423731433234453345453034333036414537333833443843353632313339344343423939464637413139340D0A7269763D35414442394541464538393742353443423130363044363838354245323243460D0A7075623D37313530324144423537383335383341423838423244354632334634313941463031433842314537324643413145363934414434394645333236364631463943363145464336463239423335313134320D0A707269763D0D0A63747970653D31320D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030450D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4150500D0A65726B3D333941383730313733433232364542384133454545394341364642363735453832303339423244304343423232363533424643453444423031334241454130330D0A7269763D39303236364339384342414130364331424631343546463736304541314234350D0A7075623D38344445353639323830393834384535414342453235424535343846363938314533444231343733354135444445314130464431463437353836363533324238363242314142364130303442373235350D0A707269763D0D0A63747970653D32370D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030460D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4150500D0A65726B3D464435324446413743364545463536373936323844313245323637414138363342393336354536444239353437303934394346443233354233464341304633420D0A7269763D36344635303239364346384346343943443743363433353732383837444130420D0A7075623D30363936443643434244374346353835454635453030443534373530334331383544373432313538314241443139364530383137323343443041393746413430423243304344323439324230423541310D0A707269763D0D0A63747970653D33410D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031300D0A76657273696F6E3D303030333030363030303030303030300D0A73656C665F747970653D4150500D0A65726B3D413545353141443846333246464244453830383937324143454534363339374632443346453642433832334338323138454638373545453341394230353834460D0A7269763D37413230334435313132463739393937394446304531423842354235324141340D0A7075623D35303539374237463638304444383946363539344439424443304342454530333636364142353336343744303438374637463435324645324444303236393436333145413735353534384339453933340D0A707269763D0D0A63747970653D32350D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031310D0A76657273696F6E3D303030333030363030303030303030300D0A73656C665F747970653D4150500D0A65726B3D304638454142383838344135314430393244373235303539373338384533423842373534343441433133384239443336453543374335423843334446313846440D0A7269763D39374146333943333833453745463143393846413434374335393745413846450D0A7075623D32464441374135364141454136353932314330323834464631393432433644453133373337303039334431303630333442353931393139353141353230314234323244343632463837323646383532440D0A707269763D0D0A63747970653D32360D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031330D0A76657273696F6E3D303030333030363530303030303030300D0A73656C665F747970653D4150500D0A65726B3D444246363244373646433831433841433932333732413944363331444443393231394631353243353943344232304246463846393642363441423036354539340D0A7269763D43423544443442453843463131354646423235383031424336303836453732390D0A7075623D42323646453644334533413145373636464145373941384536413746343839393845374643314534423041443837343546463534433031384332413643433741304444373532354641464541343931370D0A707269763D0D0A63747970653D31320D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031340D0A76657273696F6E3D303030333030363530303030303030300D0A73656C665F747970653D4150500D0A65726B3D343931423044373242423231454431313539353033373946343536344345373834413442464141424230304538434237313239344231393242374239463838450D0A7269763D46393838343335383846454438423045363244374444434236463043454346340D0A7075623D30343237354538383338454639354244303133423232334333444636373435343039333246323142353334433745443239343442393130344439333846454230334238323444444238363641423236450D0A707269763D0D0A63747970653D32370D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031360D0A76657273696F6E3D303030333030373030303030303030300D0A73656C665F747970653D4150500D0A65726B3D413130363639323232344631453931453143344542414434413235464246463636423442313345383844383738453843443037324632334344314335424637430D0A7269763D36323737334337304244373439323639433041464431463132453733393039450D0A7075623D35363636333544334531444345433437323433414144313632384145364232434542333334363346433135354534363335383436434533333839394335453335334444464134374645463536393441460D0A707269763D0D0A63747970653D33300D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031370D0A76657273696F6E3D303030333030373030303030303030300D0A73656C665F747970653D4150500D0A65726B3D344531303444434530394241383738433735444139384430423136333646304535463035383332384438313431394532413344323241423032353646444634360D0A7269763D39353441383643343632394531313635333233303441373430383632454638350D0A7075623D33423742303443373143414532423131393944353734353343303338424231423534314130354144314239343136374230414234374139423234434145434239303030434232313430373030393636360D0A707269763D0D0A63747970653D30380D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031390D0A76657273696F6E3D303030343030303030303030303030300D0A73656C665F747970653D4150500D0A65726B3D333233364239393337313734444631444331324543324444384133313841304541344433454344454135444642344143314238323738343437303030433239370D0A7269763D36313533444545373831423841444443364134333934393842383136444334360D0A7075623D31343844434139363145323733384241463834423244314236453244413241424436413935463243393537314535344336393232463945443936373446303632423746314245354244364641353236380D0A707269763D0D0A63747970653D33310D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031410D0A76657273696F6E3D303030343030303030303030303030300D0A73656C665F747970653D4150500D0A65726B3D354546443145393936313436323739344533423945463241344430433146343646363432414145303533423530323535303431333035393045363646313943390D0A7269763D31414338464133423343393046384644453633393531354639314235383332370D0A7075623D42453442314235313335333639363036313842464546313241373133463636373338383142303246394443363136313931453832334643383333374343463939414441413631373230313943304332330D0A707269763D0D0A63747970653D31370D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031430D0A76657273696F6E3D303030343030323030303030303030300D0A73656C665F747970653D4150500D0A65726B3D434646303235333735424130303739323236424530314634413331463334364437394636324346423634334341393130453136434636304244393039323735320D0A7269763D46443430363634453245424241303142463335394230444344463534334441340D0A7075623D33364331414345364444354343433030303646444633343234373530464143353135464335434641324339334543353343364543324243343231373038443135344539314632453745413534413839330D0A707269763D0D0A63747970653D30390D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031440D0A76657273696F6E3D303030343030323030303030303030300D0A73656C665F747970653D4150500D0A65726B3D443230323137344542363541363230343846333637344235394546364645373245313837323936324633453143443635384445384437414637314441314633450D0A7269763D41434239393435393134454242374239413331454345333230414530394632440D0A7075623D34333033323238383735303343463532393238464141413431304644363233433733323132383143383832354439354635423437454630373845464346433434343534433341423446303042423837390D0A707269763D0D0A63747970653D31410D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031450D0A76657273696F6E3D303030343030333030303030303030300D0A73656C665F747970653D4150500D0A65726B3D343642443038393132323445304345313345323136323932314434424237363139334145454534343136413732394643444431313143353533364246383743390D0A7269763D42463033363338374344423631334330414338384136443944324343353331360D0A7075623D41313446364435463941443745424233423741333941374333324631334535444333423042413136424443333344333946444446383846344145454136434645454230433037393643393137413935320D0A707269763D0D0A63747970653D30460D0A0D0A0D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030300D0A76657273696F6E3D303030303030393230303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D443931313636393733393739454138363934343736423031314143363243374539463337444132364445314535433245453344363645343242383531373038350D0A7269763D44433031323830413645343642433637344238314137453838303145424536450D0A7075623D41304643343431303832333631343142463335313741363632423032374146433141433531334130353639303439364337353444454237443433424443343142383046443735433231323632344545340D0A707269763D0D0A63747970653D31310D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030310D0A76657273696F6E3D303030313030303030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D463945444430333031463737304641424241383836334439383937463046454136353531423039343331463631333132363534453238463433353333454136420D0A7269763D41353531434342344134324333374137333441324234463936353744353534300D0A7075623D42303546394441354639313231454534303331343637453734433530354332394138453239443130323233373945444646303530304239414534383042354441423435373841344336314335443642460D0A707269763D3030303430414234373530394245443034424439363532314144314233363542383642463632304139380D0A63747970653D31310D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030320D0A76657273696F6E3D303030313030303030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D384537333732333043383045363641443031363245444444333246314637373445453545344531383734343946313930373934333741353038464346394338360D0A7269763D37414145434336304144313241454439304333343844384331314432424544350D0A7075623D30354246303943423646443738303530433738444536394343333136464632374339463145443636413435424643453041314535413637343942313942443534364242423436303243463337333434300D0A707269763D0D0A63747970653D30410D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030330D0A76657273696F6E3D303030333030313530303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D314237313542304333453844433443314135373732454241394335443334463743434645354238323032354434353346333136373536363439373233393636340D0A7269763D45333145323036464242384145413237464142304439413246464236423632460D0A7075623D33463531453539464337344436363138443334343331464136373938374641313141424246414343373131313831313437334344393938384645393143343346433734363035453742384342373332440D0A707269763D0D0A63747970653D30380D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030340D0A76657273696F6E3D303030333030343030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D424234444246363642373434413333393334313732443946383337394137413545413734434230463535394242393544304537414543453931373032423730360D0A7269763D41444637423230374131354143363031313130453631444446433231304146360D0A7075623D39433332373437314241464631463837374145344645323946343530314146354144364132433435394638363232363937463538334546434132434133304142423543443435443131333143414233300D0A707269763D3030423631413931444634414236413946313432433332364241393539324235323635444138383835360D0A63747970653D31360D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030350D0A76657273696F6E3D303030333030343030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D423733313131423042303031313745343844453545324545354535333443304630454646413438393042424238434144303145453046383438463931353833450D0A7269763D38364635364639453544453531333839343837344238424132353333333442310D0A7075623D42304241314131414239373233424234453837434544393633374245303536303636424335364531363537324434334430323130413036343131444246384645423838383543443931323338344145350D0A707269763D0D0A63747970653D31320D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030360D0A76657273696F6E3D303030333030343030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D384234433532383439373635443242354641334435363238414642313736343444353242394646454532333542344330444237324136323836374541413032300D0A7269763D30353731394446314231443033303643303339313041444443453441463838370D0A7075623D32413544364336393038434139384643343734304438333443363430304536443641443734434630413731324346314537444145383036453938363035434333303846364130333635384632393730450D0A707269763D0D0A63747970653D32390D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030370D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D333934364446414131343137313843374245333339413044364332363330314337364235363841454243354344353236353246324532453032393734333743330D0A7269763D45343839374245353533414530323543444342463242313544314339323334450D0A7075623D41313341464538423633463839374441324433444333393837423339333839444331304241443939444642373033383338433441304243344538424234343635394337323643464430434536304430450D0A707269763D3030394546383639303737383241333138443443433336313745424143453234383045373341343646360D0A63747970653D31370D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030380D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D384539343432363743303245363941344645343734423746354643443739373441344639333646463433353541454334463830454641313233383538443846360D0A7269763D39303841373537353445353231454143324635413438383943364437423732440D0A7075623D39313230314441374437394538454532353633313432454342443634364441303236433936334143303945373630453533393046464532344441453638363433313041424531343746383230344430420D0A707269763D0D0A63747970653D31330D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030390D0A76657273696F6E3D303030333030353030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D303738364634423043413539333746353135424443453138384635363942324546333130394134444130373830413741413037424438394333333530383130410D0A7269763D30344144334332463132324133423335453830343835304341443134324336440D0A7075623D41314645363130333544424245413541393444313230443033433030304433423246303834423946344146413939413244344135383844463932423846333633323743453945343738383941343544300D0A707269763D0D0A63747970653D32410D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030410D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D303343323141443738464242364133443432354539414142313239384639464437304532394644344536453341334331353132303544413530433431334445340D0A7269763D30413939443444344638333031413838303532443731344144324642353635450D0A7075623D33393935433339304339463746424241423132344131433134453730463937343141354536424446313741363035443838323339363532433845413744354643394632344233303534364331453434420D0A707269763D3030394143364232324130353642413945304236443135323046323841353741333133353438334639460D0A63747970653D32370D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030420D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D424233314446394136463632433044463835333037354641413635313334443943453232343033303643313733314431463744413942353332394244363939460D0A7269763D32363330353732323538373346383339343041363543384339323641433345340D0A7075623D42433341383241344634344334334131393730373043443233364644433934464343353432443639413345383033453041464637384431463344413139413739443246363146414235423934423433370D0A707269763D0D0A63747970653D32330D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030430D0A76657273696F6E3D303030333030353530303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D333337413531343136313035423536453430443743414631423935344344414634453736343546323833373939303446333546323745383143413742363935370D0A7269763D38343035433838453034323238304442443739344543374532324237343030320D0A7075623D39424646314343373131384432333933444535304435434634343930393836303638333431314135333237363742464441433738363232444239453534353637353346453432324342414641314441310D0A707269763D0D0A63747970653D31380D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030440D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D333537454242454132363546414543323731313832443537314336434432463632434641303444333235353838463231334442364232453045443136364439320D0A7269763D44323645364444324237344344373845383636453734324535353731423834460D0A7075623D30304443463533393136313836303441423432433843464633444333303444463435333431454241343535313239334539453242363846464532444635323746464133424538333239453031354535370D0A707269763D0D0A63747970653D33410D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030450D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D373141413735433730413235353538304534414539424441413042303838323843353345414137313343443037313337393746313433423238344331353839420D0A7269763D39444544383738434236424130373132314330463530453742313732413842460D0A7075623D33383746434441454146463142353943464146373943453632313541303635414345414646414634303438413446323137453146463543453637433636454333463038394442323335453532463944330D0A707269763D0D0A63747970653D32390D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303030460D0A76657273696F6E3D303030333030353630303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D313335433039384342453641334530333745424539463242423942333032313844444538443638323137333436463941443333323033333532464242333239310D0A7269763D34303730433839384332454141443136333441323838414135343741333541380D0A7075623D42424437434343423535364332454630463930384443373831304641464333374632453536423344414135463746414635334134393434414139423834314637364142303931453136423233313433330D0A707269763D0D0A63747970653D33420D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031300D0A76657273696F6E3D303030333030363030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D344233434431304636413641413744393946394233413636304333354144453038454630314332433333364239453436443142423536373842343236314136310D0A7269763D43304632414238364536453034353735353244423530443732313933373143350D0A7075623D36344135433630424332414431384238413233374534414136393036343745313242463741303831353233464144344632394245383941434143373246374142343343373445433941464644413231330D0A63747970653D32370D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031330D0A76657273696F6E3D303030333030363530303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D323635433933434634383536324543354431383737334245423736383942384144313043354542364432313432313435354445424334464231323843424634360D0A7269763D38444541354646393539363832413942393842363838434541314546344131440D0A7075623D39443844423541383830363038444336393731373939314146433341443543303231354135454534313333323843324142433846333535383945303434333233373344423245323333394545463743380D0A707269763D0D0A63747970653D31380D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031360D0A76657273696F6E3D303030333030373030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D373931303334303438334534313945353546304433334534454135343130454545433341463437383134363637454341324141394437353630324231344434420D0A7269763D34414439383134333142393844464433394236333838454441443734324138450D0A7075623D36324446453438384534313042314236423246353539453443423933324243423738383435414236323343433539464446363531363834303046443736464138324544314443363045303931443144310D0A707269763D0D0A63747970653D32350D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031390D0A76657273696F6E3D303030343030303030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D464244413735393633464536393043464633354237414137423430384346363331373434454445463546373933314130344435384644364139323146464442330D0A7269763D46373243314438304646444132453342463038354634313333453644323830350D0A7075623D36333745414433344537423835433732334336323745363841424444303431393931344542454434303038333131373331444438374644444132444146373146383536413730453134444131374234320D0A707269763D0D0A63747970653D32340D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031390D0A76657273696F6E3D303030343030303130303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D464244413735393633464536393043464633354237414137423430384346363331373434454445463546373933314130344435384644364139323146464442330D0A7269763D46373243314438304646444132453342463038354634313333453644323830350D0A7075623D36333745414433344537423835433732334336323745363841424444303431393931344542454434303038333131373331444438374644444132444146373146383536413730453134444131374234320D0A707269763D0D0A63747970653D32340D0A0D0A5B6170706C64725D0D0A747970653D53454C460D0A7265766973696F6E3D303031430D0A76657273696F6E3D303030343030323030303030303030300D0A73656C665F747970653D4E5044524D0D0A65726B3D383130334541394442373930353738323139433443454446303539324234333036344137443938423630314236433742433435313038433430343741413830460D0A7269763D32343646344238333238424536413244333934454445323034373932343743350D0A7075623D35303331373243393535313330384138373632314543454539303336324431343838394246454432434633324230423345333241344639464535323741343134363442373335453141444243363736320D0A707269763D0D0A63747970653D33300D0A"
            )
        )


def get_updates(typeOfCopy):
    data = xmltodict.parse(requests.get(typeOfCopy, verify=False).content)
    digital = []
    for item in data["titlepatch"]["tag"]["package"]:
        digital.append(item["@url"])
    for link in digital:
        r = requests.get(link, allow_redirects=True)
        open("temp/" + link.rsplit("/", 1)[-1], "wb").write(r.content)


while True:
    phys_or_dig = input(
        'Do you have the Blu-Ray, Digital?\nType "B" for BluRay, type "D" for Digital\n> '
    ).upper()
    if phys_or_dig == "B":
        url = "https://a0.ww.np.dl.playstation.net/tpl/np/BLJM61149/BLJM61149-ver.xml"
        get_updates(url)
        break
    elif phys_or_dig == "D":
        url = "https://a0.ww.np.dl.playstation.net/tpl/np/NPJB00532/NPJB00532-ver.xml"
        get_updates(url)
        break
    else:
        print("Try again.\n\n")

for file in os.listdir("temp"):
    if file.endswith(".pkg"):
        with open(os.devnull, "wb") as devnull:
            os.system(
                "python tools/PSN_get_pkg_info/PSN_get_pkg_info.py "
                + "temp/"
                + file
                + " --overwrite"
                + " --content"
                + " temp/update"
            )
            os.remove("temp/" + file)
            copy_tree(
                "temp/update/" + os.listdir("temp/update/")[0],
                "patch/",
            )

copy_tree("metadata/PS3DIGORDISC/", "patch/")
os.chdir("tools")
os.system("scetool -d ../patch/USRDIR/EBOOT.BIN ../patch/USRDIR/EBOOT.elf")
os.chdir("..")

if phys_or_dig == "B":
    os.system(
        "python tools/eboot_string_patcher/eboot_string_patcher.py -s -e utf8 translation_data/disc.json "
        "patch/USRDIR/EBOOT.elf patch/USRDIR/EBOOT_trans.bin"
    )
    os.system(
        f"tools\\scetool -v --sce-type=SELF --skip-sections=TRUE --key-revision=01 --self-auth-id=1010000001000003 "
        "--self-app-version=0001000000000000 --self-add-shdrs=TRUE --self-vendor-id=01000002 --self-type=NPDRM "
        "--self-fw-version=0003004000000000 --np-license-type=FREE --np-content-id=BLJM61149 --np-app-type=EXEC "
        "--np-real-fname=EBOOT.BIN --encrypt patch/USRDIR/EBOOT_trans.BIN patch/USRDIR/EBOOT.BIN"
    )
    with open("patch/package.conf", "wt") as the_file:
        the_file.write(
            "Content-ID = JP0177-BLJM61149_00-GAMEVER0108WEEK8\nk_licensee = "
            "0x00000000000000000000000000000000\nDRM_Type = Free\nContent_Type = GameExec\nPackageVersion = "
            "01.08 "
        )

if phys_or_dig == "D":
    os.system(
        "python tools/eboot_string_patcher/eboot_string_patcher.py -s -e utf8 translation_data/digital.json "
        "patch/USRDIR/EBOOT.elf patch/USRDIR/EBOOT_trans.bin"
    )
    os.system(
        "tools\\scetool -v --sce-type=SELF --skip-sections=TRUE --key-revision=01 --self-auth-id=1010000001000003 "
        "--self-app-version=0001000000000000 --self-add-shdrs=TRUE --self-vendor-id=01000002 --self-type=NPDRM "
        "--self-fw-version=0003004000000000 --np-license-type=FREE --np-content-id=NPJB00532 --np-app-type=EXEC "
        "--np-real-fname=EBOOT.BIN --encrypt patch/USRDIR/EBOOT_trans.BIN patch/USRDIR/EBOOT.BIN"
    )
    with open("patch/package.conf", "wt") as the_file:
        the_file.write(
            "Content-ID = JP0177-NPJB00532_00-RYUISHINRETAIL00\nk_licensee = "
            "0x00000000000000000000000000000000\nDRM_Type = Free\nContent_Type = GameExec\nPackageVersion = "
            "01.08 "
        )

shutil.move(f"patch/PARAM.SFO_{phys_or_dig}", "patch/PARAM.SFO")
os.system("tools\\make_package_npdrm_retail.exe patch\\package.conf patch")
